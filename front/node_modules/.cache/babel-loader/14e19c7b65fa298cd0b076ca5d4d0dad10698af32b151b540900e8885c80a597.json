{"ast":null,"code":"var _jsxFileName = \"/Users/sanajayaswal/Downloads/syllasync/syllasync-frontend/src/components/SyllabusUploader.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SyllabusUploader = () => {\n  _s();\n  const [files, setFiles] = useState(null);\n  const [message, setMessage] = useState('');\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [calendarType, setCalendarType] = useState('google');\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [progress, setProgress] = useState([]);\n  useEffect(() => {\n    fetch('http://localhost:5002/auth/status', {\n      credentials: 'include'\n    }).then(res => res.json()).then(data => setIsAuthenticated(data.authenticated)).catch(() => setIsAuthenticated(false));\n  }, []);\n  const addProgressMessage = msg => {\n    setProgress(prev => [...prev, msg]);\n  };\n  const handleUpload = async () => {\n    if (calendarType === 'google' && !isAuthenticated) {\n      setMessage('Please login with Google first');\n      return;\n    }\n    if (!files || files.length === 0) {\n      setMessage('Please select at least one file');\n      return;\n    }\n    setIsProcessing(true);\n    setProgress([]);\n    setMessage('');\n    for (let i = 0; i < files.length; i++) {\n      const file = files[i];\n      addProgressMessage(`Processing ${file.name}...`);\n      const formData = new FormData();\n      formData.append('file', file);\n      formData.append('calendar', calendarType);\n      try {\n        const response = await fetch('http://localhost:5002/upload', {\n          method: 'POST',\n          body: formData,\n          credentials: 'include'\n        });\n        if (calendarType === 'apple') {\n          const blob = await response.blob();\n          const url = window.URL.createObjectURL(blob);\n          const a = document.createElement('a');\n          a.href = url;\n          a.download = `calendar-events-${file.name}.ics`;\n          document.body.appendChild(a);\n          a.click();\n          window.URL.revokeObjectURL(url);\n          document.body.removeChild(a);\n          addProgressMessage(`Downloaded calendar file for ${file.name}`);\n        } else {\n          const data = await response.json();\n          addProgressMessage(`${file.name}: ${data.message || 'Success!'}`);\n        }\n      } catch (error) {\n        addProgressMessage(`Failed to process ${file.name}`);\n        console.error('Upload error:', error);\n      }\n    }\n    setIsProcessing(false);\n    setMessage('All files processed');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: '20px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"radio\",\n          value: \"google\",\n          checked: calendarType === 'google',\n          onChange: e => setCalendarType(e.target.value),\n          disabled: isProcessing\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }, this), \" Google Calendar\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        style: {\n          marginLeft: '10px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"radio\",\n          value: \"apple\",\n          checked: calendarType === 'apple',\n          onChange: e => setCalendarType(e.target.value),\n          disabled: isProcessing\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }, this), \" Apple Calendar\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this), calendarType === 'google' && !isAuthenticated ? /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => window.location.href = 'http://localhost:5002/auth/google',\n      disabled: isProcessing,\n      children: \"Sign in with Google\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        multiple: true,\n        accept: \".pdf\",\n        onChange: e => setFiles(e.target.files),\n        disabled: isProcessing\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleUpload,\n        disabled: isProcessing,\n        children: isProcessing ? 'Processing...' : 'Upload Syllabi'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '20px'\n      },\n      children: progress.map((msg, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          margin: '5px 0'\n        },\n        children: msg\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        marginTop: '20px',\n        fontWeight: 'bold',\n        color: message.includes('error') ? 'red' : 'green'\n      },\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 9\n  }, this);\n};\n_s(SyllabusUploader, \"2dB/ZsvmWhXyewuIirBw++fM5Mo=\");\n_c = SyllabusUploader;\nexport default SyllabusUploader;\nvar _c;\n$RefreshReg$(_c, \"SyllabusUploader\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","Fragment","_Fragment","SyllabusUploader","_s","files","setFiles","message","setMessage","isAuthenticated","setIsAuthenticated","calendarType","setCalendarType","isProcessing","setIsProcessing","progress","setProgress","fetch","credentials","then","res","json","data","authenticated","catch","addProgressMessage","msg","prev","handleUpload","length","i","file","name","formData","FormData","append","response","method","body","blob","url","window","URL","createObjectURL","a","document","createElement","href","download","appendChild","click","revokeObjectURL","removeChild","error","console","style","padding","children","marginBottom","type","value","checked","onChange","e","target","disabled","fileName","_jsxFileName","lineNumber","columnNumber","marginLeft","onClick","location","multiple","accept","marginTop","map","index","margin","fontWeight","color","includes","_c","$RefreshReg$"],"sources":["/Users/sanajayaswal/Downloads/syllasync/syllasync-frontend/src/components/SyllabusUploader.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nconst SyllabusUploader: React.FC = () => {\n    const [files, setFiles] = useState<FileList | null>(null);\n    const [message, setMessage] = useState<string>('');\n    const [isAuthenticated, setIsAuthenticated] = useState(false);\n    const [calendarType, setCalendarType] = useState<'google' | 'apple'>('google');\n    const [isProcessing, setIsProcessing] = useState(false);\n    const [progress, setProgress] = useState<string[]>([]);\n\n    useEffect(() => {\n        fetch('http://localhost:5002/auth/status', {\n            credentials: 'include'\n        })\n        .then(res => res.json())\n        .then(data => setIsAuthenticated(data.authenticated))\n        .catch(() => setIsAuthenticated(false));\n    }, []);\n\n    const addProgressMessage = (msg: string) => {\n        setProgress(prev => [...prev, msg]);\n    };\n\n    const handleUpload = async () => {\n        if (calendarType === 'google' && !isAuthenticated) {\n            setMessage('Please login with Google first');\n            return;\n        }\n\n        if (!files || files.length === 0) {\n            setMessage('Please select at least one file');\n            return;\n        }\n\n        setIsProcessing(true);\n        setProgress([]);\n        setMessage('');\n\n        for (let i = 0; i < files.length; i++) {\n            const file = files[i];\n            addProgressMessage(`Processing ${file.name}...`);\n\n            const formData = new FormData();\n            formData.append('file', file);\n            formData.append('calendar', calendarType);\n\n            try {\n                const response = await fetch('http://localhost:5002/upload', {\n                    method: 'POST',\n                    body: formData,\n                    credentials: 'include'\n                });\n\n                if (calendarType === 'apple') {\n                    const blob = await response.blob();\n                    const url = window.URL.createObjectURL(blob);\n                    const a = document.createElement('a');\n                    a.href = url;\n                    a.download = `calendar-events-${file.name}.ics`;\n                    document.body.appendChild(a);\n                    a.click();\n                    window.URL.revokeObjectURL(url);\n                    document.body.removeChild(a);\n                    addProgressMessage(`Downloaded calendar file for ${file.name}`);\n                } else {\n                    const data = await response.json();\n                    addProgressMessage(`${file.name}: ${data.message || 'Success!'}`);\n                }\n            } catch (error) {\n                addProgressMessage(`Failed to process ${file.name}`);\n                console.error('Upload error:', error);\n            }\n        }\n\n        setIsProcessing(false);\n        setMessage('All files processed');\n    };\n\n    return (\n        <div style={{ padding: '20px' }}>\n            <div style={{ marginBottom: '20px' }}>\n                <label>\n                    <input\n                        type=\"radio\"\n                        value=\"google\"\n                        checked={calendarType === 'google'}\n                        onChange={(e) => setCalendarType(e.target.value as 'google' | 'apple')}\n                        disabled={isProcessing}\n                    /> Google Calendar\n                </label>\n                <label style={{ marginLeft: '10px' }}>\n                    <input\n                        type=\"radio\"\n                        value=\"apple\"\n                        checked={calendarType === 'apple'}\n                        onChange={(e) => setCalendarType(e.target.value as 'google' | 'apple')}\n                        disabled={isProcessing}\n                    /> Apple Calendar\n                </label>\n            </div>\n\n            {calendarType === 'google' && !isAuthenticated ? (\n                <button \n                    onClick={() => window.location.href = 'http://localhost:5002/auth/google'}\n                    disabled={isProcessing}\n                >\n                    Sign in with Google\n                </button>\n            ) : (\n                <>\n                    <input \n                        type=\"file\" \n                        multiple\n                        accept=\".pdf\"\n                        onChange={(e) => setFiles(e.target.files)}\n                        disabled={isProcessing}\n                    />\n                    <button \n                        onClick={handleUpload}\n                        disabled={isProcessing}\n                    >\n                        {isProcessing ? 'Processing...' : 'Upload Syllabi'}\n                    </button>\n                </>\n            )}\n\n            {/* Progress Messages */}\n            <div style={{ marginTop: '20px' }}>\n                {progress.map((msg, index) => (\n                    <div key={index} style={{ margin: '5px 0' }}>\n                        {msg}\n                    </div>\n                ))}\n            </div>\n\n            {/* Final Message */}\n            {message && (\n                <p style={{ \n                    marginTop: '20px',\n                    fontWeight: 'bold',\n                    color: message.includes('error') ? 'red' : 'green'\n                }}>\n                    {message}\n                </p>\n            )}\n        </div>\n    );\n};\n\nexport default SyllabusUploader;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}